{% extends "ui/base.html" %}

{% block extra_head %}
    <link rel="stylesheet" href="/static/ui/css/style.css"/><link rel="stylesheet" href="/static/sketch_ui/js/lib/jquery-ui-1.9.1.custom/css/ui-lightness/jquery-ui-1.9.1.custom.min.css" />
    <link rel="stylesheet" href="/static/sketch_ui/js/lib/json-tree-viewer/css/jquery.jsonview.css"/>
{% endblock %}




{% block content_centered %}
   
    
{% endblock %}

{% block content_wide %}

    
    <div id="blocks-canvas">
    </div>    
    
    
    <div class="navbar navbar-fixed-bottom">
        <div class="navbar-inner">
            <div class="container">
                <ul class="nav">
                    <li><p class="navbar-text">Change background</p></li>
                </ul>
                <form class="navbar-form pull-left">
                            <select data-bind="options: canvasBackgrounds, value: canvasBackground" ></select>
                        </form>
            </div>
        </div>
    </div>
    
    <script>
       
    </script>    

{% endblock %}


{% block js_body %}
    <script src="/static/sketch_ui/js/lib/jquery-ui-1.9.1.custom/js/jquery-ui-1.9.1.custom.min.js"></script>
    <!--<script src="/static/sketch_ui/js/lib/jquery.zoomooz.min.js"></script>-->
    
    <script src="/static/ui/jsPlumb/jquery.jsPlumb-1.3.16-all-min.js"></script>    
    <script src="/static/sketch_ui/js/lib/json-tree-viewer/js/jquery.jsonview.js"></script>
    
     <script src="/static/sketch/js/sketch.js"></script>

     <script src="/static/sketch_ui/js/lib/jquery.tmpl.min.js"></script>
     <script src="/static/sketch_ui/js/lib/knockout-2.1.0.js"></script>
     
     <script src="/static/sketch_ui/js/lib/d3.v2.min.js"></script>
     <script src="/static/sketch_ui/js/lib/d3.layout.cloud.js"></script>
    
     
     <script src="/static/sketch_ui/js/lib//OpenLayers/OpenLayers.js"></script> 

     <!--
     <script src="http://dev.openlayers.org/sandbox/camptocamp/canvas/openlayers/lib/OpenLayers.js"></script> 
     -->
     
     <!--
     <script src="http://dev.openlayers.org/sandbox/camptocamp/canvas/openlayers/lib/OpenLayers/Control/ExportMap.js"></script> 
     -->

     <script src="/static/ui/js/ui.js"></script>
     <script src="/static/ui/js/ui-register.js"></script>
     <script src="/static/ui/js/ui-toolbar.js"></script>
     <script src="/static/ui/js/ui-app.js"></script>
     <script src="/static/ui/js/ui-fields.js"></script>
     <script src="/static/ui/js/ui-blocks.js"></script>
     
     
     <script>
     
        head.ready(function(){
     
            jsPlumb.ready(function(){
        
                jsPlumb.importDefaults({
                    ConnectorZIndex:5,
                    DragOptions : { cursor: 'pointer', zIndex:2000 },
                    ConnectionOverlays : [
                        [ "Arrow", { location:0.9 } ]
                    ]
                });
            
                sketchui.app = new sketchui.SketchApp();
                ko.applyBindings(sketchui.app);
                
                var stageState =  JSON.parse('{{ state|safe }}');
                sketchui.app.setStageState(stageState.state);
                
                
                
            });
        });
     </script>
     
    
{% endblock %}